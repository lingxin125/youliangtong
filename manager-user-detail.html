<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>邮粮通 - 商户详情</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="shared.js"></script>
    <style>
        .postal-bg { background: #F5F7FA; }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #F0F0F0;
        }
        .info-row:last-child {
            border-bottom: none;
        }
        .info-label {
            font-size: 14px;
            color: #666;
        }
        .info-value {
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }

        .avatar-large {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 24px;
            font-weight: 500;
        }
    </style>
</head>
<body>
<div class="mobile-container postal-bg">
    <div id="statusBar"></div>
    <div id="navBar"></div>

    <div class="flex-1 overflow-y-auto no-scrollbar px-4 pb-4" style="padding-bottom:20px;">

        <!-- 头部信息卡 -->
        <div class="glass-panel rounded-2xl p-5 mt-3 text-center">
            <div class="avatar-large mx-auto mb-3" id="userAvatar">张</div>
            <div class="text-lg font-semibold text-gray-800" id="userName">--</div>
            <div class="flex items-center justify-center gap-2 mt-2">
                <span class="px-2 py-0.5 rounded text-xs font-medium" id="typeTag">--</span>
                <span class="px-2 py-0.5 rounded text-xs font-medium" id="statusTag">--</span>
            </div>
        </div>

        <!-- 基本信息 -->
        <div class="glass-panel rounded-2xl p-4 mt-4">
            <div class="text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-info-circle text-primary mr-1"></i>基本信息
            </div>
            <div class="info-row">
                <span class="info-label">商户简称</span>
                <span class="info-value" id="shortName">--</span>
            </div>
            <div class="info-row">
                <span class="info-label">负责人</span>
                <span class="info-value" id="personName">--</span>
            </div>
            <div class="info-row">
                <span class="info-label">手机号码</span>
                <span class="info-value" id="phone">--</span>
            </div>
            <div class="info-row">
                <span class="info-label">开户时间</span>
                <span class="info-value" id="openTime">--</span>
            </div>
        </div>

        <!-- 交易统计 -->
        <div class="glass-panel rounded-2xl p-4 mt-4">
            <div class="text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-chart-bar text-primary mr-1"></i>交易统计
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div class="text-center p-3 bg-gray-50 rounded-lg">
                    <div class="text-xl font-bold text-primary" style="font-family:Poppins;" id="tradeCount">--</div>
                    <div class="text-xs text-gray-500 mt-1">累计交易笔数</div>
                </div>
                <div class="text-center p-3 bg-gray-50 rounded-lg">
                    <div class="text-xl font-bold text-primary" style="font-family:Poppins;" id="tradeAmount">--</div>
                    <div class="text-xs text-gray-500 mt-1">累计交易金额</div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
document.getElementById('statusBar').innerHTML = renderStatusBar();
document.getElementById('navBar').innerHTML = renderHeader('商户详情', 'manager-users.html');

// 解析URL参数
const params = new URLSearchParams(location.search);
const userData = {
    name: params.get('name') || '未知商户',
    short: params.get('short') || '--',
    type: params.get('type') || 'buyer',
    person: params.get('person') || '--',
    phone: params.get('phone') || '--',
    time: params.get('time') || '--',
    status: params.get('status') || 'completed',
    trades: params.get('trades') || '0',
    amount: params.get('amount') || '0'
};

// 渲染数据
document.getElementById('userAvatar').textContent = userData.short[0];
document.getElementById('userAvatar').style.background = userData.type === 'buyer' ? '#3B82F6' : '#F59E0B';
document.getElementById('userName').textContent = userData.name;
document.getElementById('shortName').textContent = userData.short;
document.getElementById('personName').textContent = userData.person;
document.getElementById('phone').textContent = userData.phone;
document.getElementById('openTime').textContent = userData.time;
document.getElementById('tradeCount').textContent = userData.trades;
document.getElementById('tradeAmount').textContent = userData.amount;

// 类型标签
const typeTag = document.getElementById('typeTag');
typeTag.textContent = userData.type === 'buyer' ? '收购商' : '农户';
typeTag.className = 'px-2 py-0.5 rounded text-xs font-medium ' + (userData.type === 'buyer' ? 'bg-blue-50 text-blue-600' : 'bg-amber-50 text-amber-600');

// 状态标签
const statusTag = document.getElementById('statusTag');
statusTag.textContent = userData.status === 'pending' ? '审核中' : '已进件';
statusTag.className = 'px-2 py-0.5 rounded text-xs font-medium ' + (userData.status === 'pending' ? 'bg-orange-50 text-orange-600' : 'bg-green-50 text-green-600');
</script>
</body>
</html>
